{
  "manifestVersion": 1,
  "id": "nexus-custom-release-artifact-extension-3",
  "publisher": "soft-cor",
  "version": "1.0.82",
  "name": "Sonatype Nexus Repository v3 Release Artifact",
  "description": "Add support for Sonatype Nexus Repository v3 as an artifact for Release Pipelines",
  "public": true,
  "galleryFlags": [

  ],
  "categories": [ "Azure Pipelines" ],
  "content": {
    "details": {
        "path": "overview.md"
    },
    "license": {
      "path": "LICENSE"
    }
  },
  "repository": {
    "type": "git",
    "uri": "https://github.com/keyoke/NexusPipelineArtifact"
  },
  "tags": [
    "Sonatype",
    "Nexus",
    "repository",
    "manager",
    "continuous",
    "release",
    "deploy",
    "cd"
  ],
  "targets": [
    {
      "id": "Microsoft.VisualStudio.Services"
    }
  ],
  "demands": [ "contribution/ms.vss-endpoint.nexus-endpoint-type" ],
  "icons": {
    "default": "icon-nexus-logo.png"
  },
  "screenshots": [
    {
      "path": "images/screen1.png"
    },
    {
      "path": "images/screen2.png"
    },
    {
      "path": "images/screen3.png"
    },
    {
      "path": "images/screen4.png"
    },
    {
      "path": "images/screen5.png"
    }
  ],
  "files": [
    {
      "path": "images/screen1.png",
      "addressable": true
    },
    {
        "path": "images/screen2.png",
        "addressable": true
    },
    {
        "path": "images/screen3.png",
        "addressable": true
    },
    {
        "path": "images/screen4.png",
        "addressable": true
    },
    {
        "path": "images/screen5.png",
        "addressable": true
    },
    {
      "path": "icon-nexus-logo.png",
      "addressable": true
    },
    {
      "path": "dist/Tasks/DownloadArtifactsNexus/DownloadArtifactsNexusV3"
    }
  ],
  "contributions": [
      {
          "id": "nexus-build-release-task-3",
          "type": "ms.vss-distributed-task.task",
          "targets": [
              "ms.vss-distributed-task.tasks"
          ],
          "properties": {
              "name": "dist/Tasks/DownloadArtifactsNexus/DownloadArtifactsNexusV3"
          }
      },
      {
        "id": "nexus-custom-release-artifact-type-3",
        "description": "Sonatype Nexus Repository v3 Artifact (Maven)",
        "type": "ms.vss-releaseartifact.release-artifact-type",
        "targets": [
          "ms.vss-releaseartifact.artifact-types"
        ],
        "properties": {
          "name": "NexusMavenRepository3",
          "displayName": "Maven Repository v3",
          "endpointTypeId": "nexus",
          "uniqueSourceIdentifier": "{{connection}}:{{definition}}:{{group}}:{{artifact}}",
          "downloadTaskId": "1f9e06bd-db88-478b-8212-78b5f17533c9",
          "artifactType": "Build",
          "inputDescriptors": [
            {
              "id": "connection",
              "name": "Service connection",
              "description": "Nexus service connection",
              "inputMode": "Combo",
              "isConfidential": false,
              "hasDynamicValueInformation": true,
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "definition",
              "name": "Repository Id",
              "description": "Name of the Nexus repository in which to look for the component.",
              "inputMode": "Combo",
              "isConfidential": false,
              "hasDynamicValueInformation": true,
              "dependencyInputIds": [
                "connection"
              ],
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "group",
              "name": "Group Id",
              "description": "The Maven groupId for a component.",
              "inputMode": "Combo",
              "isConfidential": false,
              "hasDynamicValueInformation": true,
              "dependencyInputIds": [
                "connection",
                "definition"
              ],
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "artifact",
              "name": "Artifact Id",
              "description": "The Maven artifactId for a component.",
              "inputMode": "Combo",
              "isConfidential": false,
              "hasDynamicValueInformation": true,
              "dependencyInputIds": [
                "connection",
                "definition",
                "group"
              ],
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "defaultVersionType",
              "name": "Default Version",
              "description": "The default version will be deployed when new releases are created. The version can be changed for manually created releases at the time of release creation.",
              "inputMode": "Combo",
              "isConfidential": false,
              "hasDynamicValueInformation": false,
              "values": {
                "inputId": "defaultVersionTypeValues",
                "defaultValue": "latestType",
                "possibleValues": [
                  {
                    "value": "latestType",
                    "displayValue": "Latest"
                  },
                  {
                    "value": "specificVersionType",
                    "displayValue": "Specific version"
                  },
                  {
                    "value": "selectDuringReleaseCreationType",
                    "displayValue": "Specify at the time of release creation"
                  }
                ],
                "isLimitedToPossibleValues": true
              },
              "validation": {
                "isRequired": true,
                "dataType": "string"
              }
            },
            {
              "id": "defaultVersionSpecific",
              "name": "Version",
              "description": "The version of the component/asset.",
              "inputMode": "combo",
              "isConfidential": false,
              "hasDynamicValueInformation": true,
              "dependencyInputIds": [
                "connection",
                "definition",
                "defaultVersionType"
              ],
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              },
              "properties": {
                "visibleRule": "defaultVersionType == specificVersionType"
              }
            },
            {
              "id": "packaging",
              "name": "Packaging",
              "description": "The Maven packaging for a component, which is jar by default. Other values as used in Maven and other build tools are ear, war, maven-plugin, pom, ejb, zip, tar.gz, aar and many others.",
              "inputMode": "textbox",
              "isConfidential": false,
              "hasDynamicValueInformation": false,
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "classifier",
              "name": "Classifier",
              "description": "The Maven classifier for a component. Common values are javadoc, sources or tests.",
              "inputMode": "textbox",
              "isConfidential": false,
              "hasDynamicValueInformation": false,
              "validation": {
                "isRequired": false,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "extension",
              "name": "Extension",
              "description": "The extension used for a specific asset of a component.",
              "inputMode": "textbox",
              "isConfidential": false,
              "hasDynamicValueInformation": false,
              "validation": {
                "isRequired": false,
                "dataType": "string",
                "maxLength": 300
              }
            }
          ],
          "taskInputMapping": {
            "connection": "{{{connection}}}",
            "repository": "{{{definition}}}",
            "group": "{{{group}}}",
            "artifact": "{{{artifact}}}",
            "baseVersion": "{{{version}}}",
            "packaging": "{{{packaging}}}",
            "classifier": "{{{classifier}}}",
            "extension": "{{{extension}}}"
          },
          "dataSourceBindings": [
            {
              "target": "definition",
              "endpointUrl":"{{endpoint.url}}service/rest/v1/repositories",
              "resultSelector":"jsonpath:$.[?(@.format=='maven2')]",
              "resultTemplate": "{ Value : \"{{{name}}}\", DisplayValue : \"{{{name}}}\" }"
            },
            {
              "target": "group",
              "endpointUrl":"{{endpoint.url}}service/rest/v1/search?repository={{{definition}}}",
              "resultSelector":"jsonpath:$.items[*].group",
              "resultTemplate": "{ Value : \"{{{defaultResultKey}}}\", DisplayValue : \"{{{defaultResultKey}}}\" }"
            },
            {
              "target": "artifact",
              "endpointUrl":"{{endpoint.url}}service/rest/v1/search?repository={{{definition}}}&maven.groupId={{group}}",
              "resultSelector":"jsonpath:$.items[*].name",
              "resultTemplate": "{ Value : \"{{{defaultResultKey}}}\", DisplayValue : \"{{{defaultResultKey}}}\" }"
            },
            {
              "target": "defaultVersionSpecific",
              "endpointUrl":"{{endpoint.url}}service/rest/v1/search?repository={{{definition}}}&maven.groupId={{group}}&maven.artifactId={{artifact}}&sort=version",
              "resultSelector":"jsonpath:$.items[*]",
              "resultTemplate": "{ Value : \"{{{version}}}\", DisplayValue : \"{{{version}}}\" }"
            },
            {
              "target": "versions",
              "endpointUrl":"{{endpoint.url}}service/rest/v1/search?repository={{{definition}}}&maven.groupId={{group}}&maven.artifactId={{artifact}}&sort=version",
              "resultSelector":"jsonpath:$.items[*]",
              "resultTemplate": "{ Value : \"{{{version}}}\", DisplayValue : \"{{{version}}}\" }"
            },
            {
              "target": "latestversion",
              "endpointUrl":"{{endpoint.url}}service/rest/v1/search?repository={{{definition}}}&maven.groupId={{group}}&maven.artifactId={{artifact}}&sort=version",
              "resultSelector":"jsonpath:$.items[0]",
              "resultTemplate": "{ Value : \"{{{version}}}\", DisplayValue : \"{{{version}}}\" }"
            }
          ],
          "ArtifactTriggerConfiguration" : {
              "isTriggerSupported": false
          }
        }
      }
  ],
  "scopes": [],
  "contributionTypes": []
}