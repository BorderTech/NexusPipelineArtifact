{
  "manifestVersion": 1,
  "id": "nexus-custom-release-artifact-extension",
  "publisher": "soft-cor",
  "version": "1.0.63",
  "name": "Sonatype Nexus Release Artifact",
  "description": "Add support for Sonatype Nexus as an artifact for Release Pipelines",
  "public": true,
  "galleryFlags": [
    "Preview"
  ],
  "categories": [ "Azure Pipelines" ],
  "content": {
    "details": {
        "path": "overview.md"
    },
    "license": {
      "path": "LICENSE"
    }
  },
  "repository": {
    "type": "git",
    "uri": "https://github.com/keyoke/NexusPipelineArtifact"
  },
  "tags": [
    "Sonatype",
    "Nexus",
    "continuous",
    "release",
    "deploy",
    "cd"
  ],
  "targets": [
    {
      "id": "Microsoft.VisualStudio.Services"
    }
  ],
  "icons": {
    "default": "icon-nexus-logo.png"
  },
  "screenshots": [
  ],
  "files": [
    {
      "path": "icon-nexus-logo.png",
      "addressable": true
    },
    {
      "path": "dist/Tasks/DownloadArtifactsNexus"
    }
  ],
  "contributions": [
      {
        "id": "nexus-endpoint-type",
        "description": "Service connection type for Sonatype Nexus",
        "type": "ms.vss-endpoint.service-endpoint-type",
        "targets": [
          "ms.vss-endpoint.endpoint-types"
        ],
        "properties": {
          "name": "nexus",
          "displayName": "Sonatype Nexus",
          "url": {
            "displayName": "Repository URL"
          },
          "authenticationSchemes": [
            {
              "type": "ms.vss-endpoint.endpoint-auth-scheme-basic",
              "inputDescriptors": [
                {
                  "id": "username",
                  "name": "Username",
                  "description": "Username for connecting to the endpoint",
                  "inputMode": "textbox",
                  "isConfidential": false,
                  "validation": {
                    "isRequired": true,
                    "dataType": "string"
                  }
                },
                {
                  "id": "password",
                  "name": "Password",
                  "description": "Password for connecting to the endpoint",
                  "inputMode": "passwordBox",
                  "isConfidential": true,
                  "validation": {
                    "isRequired": true,
                    "dataType": "string"
                  }
                }
              ]
            }
          ],        
          "inputDescriptors": [
            {
              "id": "acceptUntrustedCerts",
              "name": "Accept untrusted SSL certificates",
              "description": "Allows self-signed SSL certificates.",
              "inputMode": "checkbox",
              "isConfidential": false,
              "validation": {
                "isRequired": false,
                "dataType": "boolean"
              }
            }
          ],
          "dataSources": [
            
          ]
        },
        "constraints": [
          {
            "name": "Feature",
            "properties": {
              "featureId": "ms.vss-distributedtask-web.new-serviceconnections-ui"
            }
          }
        ]
      },
      {
          "id": "nexus-build-release-task",
          "type": "ms.vss-distributed-task.task",
          "targets": [
              "ms.vss-distributed-task.tasks"
          ],
          "properties": {
              "name": "dist/Tasks/DownloadArtifactsNexus"
          }
      },
      {
        "id": "nexus-custom-release-artifact-type-v3",
        "description": "Sonatype Nexus Artifact V3",
        "type": "ms.vss-releaseartifact.release-artifact-type",
        "targets": [
          "ms.vss-releaseartifact.artifact-types"
        ],
        "properties": {
          "name": "NexusMavenRepositoryV3",
          "displayName": "Nexus Maven Repository V3",
          "endpointTypeId": "nexus",
          "uniqueSourceIdentifier": "{{connection}}:{{definition}}:{{group}}:{{artifact}}",
          "downloadTaskId": "a843bbfd-4ced-4e8d-8102-cf2f193ee283",
          "artifactType": "Build",
          "inputDescriptors": [
            {
              "id": "connection",
              "name": "Service connection",
              "description": "Nexus service connection",
              "inputMode": "Combo",
              "isConfidential": false,
              "hasDynamicValueInformation": true,
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "definition",
              "name": "Repository Id",
              "description": "Name of the Nexus repository in which to look for the component.",
              "inputMode": "textbox",
              "isConfidential": false,
              "hasDynamicValueInformation": false,
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "group",
              "name": "Group Id",
              "description": "The Maven groupId for a component.",
              "inputMode": "textbox",
              "isConfidential": false,
              "hasDynamicValueInformation": false,
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "artifact",
              "name": "Artifact Id",
              "description": "The Maven artifactId for a component.",
              "inputMode": "textbox",
              "isConfidential": false,
              "hasDynamicValueInformation": false,
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "baseVersion",
              "name": "Base Version",
              "description": "The base version of the component/asset.",
              "inputMode": "textbox",
              "isConfidential": false,
              "hasDynamicValueInformation": false,
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "packaging",
              "name": "Packaging",
              "description": "The Maven packaging for a component, which is jar by default. Other values as used in Maven and other build tools are ear, war, maven-plugin, pom, ejb, zip, tar.gz, aar and many others.",
              "inputMode": "textbox",
              "isConfidential": false,
              "hasDynamicValueInformation": false,
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "classifier",
              "name": "Classifier",
              "description": "The Maven classifier for a component. Common values are javadoc, sources or tests.",
              "inputMode": "textbox",
              "isConfidential": false,
              "hasDynamicValueInformation": false,
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            },
            {
              "id": "extension",
              "name": "Extension",
              "description": "The extension used for a specific asset of a component.",
              "inputMode": "textbox",
              "isConfidential": false,
              "hasDynamicValueInformation": false,
              "validation": {
                "isRequired": true,
                "dataType": "string",
                "maxLength": 300
              }
            }
          ],
          "taskInputMapping": {
            "connection": "{{{connection}}}",
            "repository": "{{{repository}}}",
            "group": "{{{group}}}",
            "artifact": "{{{artifact}}}",
            "baseVersion": "{{{baseVersion}}}",
            "packaging": "{{{packaging}}}",
            "classifier": "{{{classifier}}}",
            "extension": "{{{extension}}}"
          },
          "dataSourceBindings": [
            {
              "target": "definition",
              "endpointUrl":"{{endpoint.url}}service/rest/v1/repositories",
              "resultSelector":"jsonpath:$.[*]",
              "resultTemplate": "{ Value : \"{{{name}}}\", DisplayValue : \"{{{name}}}\" }"
            },
            {
              "target": "components",
              "endpointUrl":"{{endpoint.url}}/service/rest/v1/components?repository={{{definition}}}",
              "resultSelector":"jsonpath:$.[*]",
              "resultTemplate": "{ Value : \"{{{name}}}\", DisplayValue : \"{{{name}}}\" }"
            },
            {
              "target": "versions",
              "endpointUrl":"{{endpoint.url}}service/rest/v1/assets?repository={{{definition}}}",
               "resultSelector":"jsonpath:$.[*]",
              "resultTemplate": "{ Value : \"{{{name}}}\", DisplayValue : \"{{{name}}}\" }"
            },
            {
              "target": "latestversion",
              "endpointUrl":"{{endpoint.url}}service/rest/v1/assets?repository={{{definition}}}",
              "resultSelector":"jsonpath:$.[0]",
              "resultTemplate": "{ Value : \"{{{name}}}\", DisplayValue : \"{{{name}}}\" }"
            }
          ],
          "ArtifactTriggerConfiguration" : {
              "isTriggerSupported": false
          }
        }
      }
  ],
  "scopes": [],
  "contributionTypes": []
}